# node-wot-air-quality-monitor

A Web of Things (WoT) project to monitor air quality and control actuators using a simulated ESP32. The system uses:

- **Node-WoT** to consume and interact with Things via Thing Descriptions (TD)
- **MQTT** for communication between simulated ESP32 and WoT Servient
- **Express.js** API to expose sensor data and control actuators via HTTP
- **Thing Description** includes sensors, thresholds, actuator commands and LED states
- **Actuators (Fan, Buzzer)** controlled via MQTT actions
- **Sensor data and thresholds** received via MQTT topics and stored in MongoDB
- **LED states** reflect threshold evaluation (GREEN or RED) per parameter
- **React + Tailwind frontend** to view and control system

## âœ… Features

- Sensors: temperature, humidity, COâ‚‚, noise
- Actuators: fan and buzzer (GET/POST)
- Thresholds: max values for each parameter (GET/POST)
- LED state visualisation
- MongoDB integration (persist full sensor sets)
- API Express server (REST interface)
- React frontend using Vite + Tailwind CSS
- ESP32 simulator (Python + MQTT)

## ğŸ“ Folder Structure

```
node-wot-air-quality-monitor/
â”œâ”€â”€ backend/                   # Express + WoT Servient
â”‚   â”œâ”€â”€ server.js
â”‚   â”œâ”€â”€ tests_full.js
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ frontend/                  # React frontend (Vite + Tailwind)
â”‚   â”œâ”€â”€ src/
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ things/
â”‚   â””â”€â”€ thing-description.json
â”œâ”€â”€ simulator/
â”‚   â”œâ”€â”€ esp32_sim.py
â”‚   â””â”€â”€ run_simulator.bat
â”œâ”€â”€ .gitignore
â”œâ”€â”€ README.md
```

## ğŸ”§ How to Run

### Backend
```bash
cd backend
npm install
node server.js
```

### Frontend
```bash
cd frontend
npm install
npm run dev
```

### MQTT Broker (if needed)
```bash
mosquitto
```

### ESP32 Simulator
```bash
cd simulator
run_simulator.bat
```

## ğŸ” API Endpoints

### Sensor values
```
GET /temperature
GET /humidity
GET /co2
GET /noise
```

### Actuator states
```
GET /fan
GET /buzzer
```

### Control actuators
```
POST /fan       { "state": "ON" }
POST /buzzer    { "state": "OFF" }
```

### Thresholds
```
GET /thresholds
POST /thresholds/:parameter
```

### LED states
```
GET /ledStates
```

### Sensor history
```
GET /history
```

## ğŸ–¥ï¸ Frontend (React + Vite + Tailwind CSS)

### âœ… Implemented features:
- Live sensor values (auto-refresh)
- LED state indicators (per parameter)
- Threshold max values display
- Actuator states display (fan/buzzer)
- Tailwind-based responsive layout
- Modular components:
  - `SensorData.jsx`
  - `LedStates.jsx`
  - `Thresholds.jsx`
  - `ActuatorStates.jsx`
  - `Header.jsx`, `Footer.jsx`

### ğŸ“¦ Setup

```bash
cd frontend
npm install
npm run dev
```

Open: [http://localhost:5173](http://localhost:5173)

### ğŸ“Š LED State Display

- Uses `/ledStates`
- One circle per parameter: GREEN or RED
- Updated every 5 seconds

### ğŸšï¸ Threshold Max Values

- Uses `/thresholds`
- Displays current limit for each sensor
- Updated every 5 seconds

### ğŸ”˜ Actuator States

- Uses `/fan` and `/buzzer`
- Displays ON/OFF for each actuator
- Updated every 5 seconds